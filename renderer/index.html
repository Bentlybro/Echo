<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Simple Music Player</title>
    <link rel="stylesheet" href="styles.css">
    <script src="https://unpkg.com/lucide@latest/dist/umd/lucide.js"></script>
</head>
<body>
    <!-- Custom Title Bar -->
    <div class="title-bar">
        <div class="title-bar-drag-region">
            <div class="title-bar-title">
                <i data-lucide="music" class="title-bar-icon"></i>
                <span class="title-text">Music Player</span>
            </div>
        </div>
        <div class="title-bar-controls">
            <button class="title-bar-btn" id="minimize-btn" title="Minimize">
                <i data-lucide="minus"></i>
            </button>
            <button class="title-bar-btn" id="maximize-btn" title="Maximize">
                <i data-lucide="square"></i>
            </button>
            <button class="title-bar-btn close-btn" id="close-btn" title="Close">
                <i data-lucide="x"></i>
            </button>
        </div>
    </div>
    
    <div class="app-container">
        <!-- Header -->
        <header class="header">
            <h1 class="app-title">Music Player</h1>
            <div class="header-search">
                <div class="search-container">
                    <i data-lucide="search" class="search-icon"></i>
                    <input type="text" id="search-input" class="search-input" placeholder="Search songs, artists, albums...">
                    <button id="clear-search-btn" class="clear-search-btn" title="Clear search">
                        <i data-lucide="x"></i>
                    </button>
                </div>
            </div>
            <div class="header-controls">
                <button id="add-music-btn" class="btn btn-secondary">Add Music</button>
                <button id="create-playlist-btn" class="btn btn-secondary">New Playlist</button>
                <button id="manage-folders-btn" class="btn btn-secondary">Import Folders</button>
                <button id="settings-btn" class="btn btn-secondary" title="Settings">
                    <i data-lucide="settings"></i>
                </button>
            </div>
        </header>

        <!-- Main Content -->
        <div class="main-content">
            <!-- Sidebar -->
            <aside class="sidebar">
                <div class="sidebar-section">
                    <h3>Library</h3>
                    <ul class="sidebar-nav">
                        <li><a href="#" class="nav-item active" data-view="all-songs">All Songs</a></li>
                        <li><a href="#" class="nav-item" data-view="liked-songs">
                            <i data-lucide="heart"></i>
                            Liked Songs
                        </a></li>
                        <li><a href="#" class="nav-item" data-view="artists">Artists</a></li>
                        <li><a href="#" class="nav-item" data-view="albums">Albums</a></li>
                    </ul>
                </div>
                
                <div class="sidebar-section">
                    <h3>Playlists</h3>
                    <ul id="playlists-list" class="sidebar-nav">
                        <!-- Playlists will be loaded here -->
                    </ul>
                </div>
            </aside>

            <!-- Content Area -->
            <main class="content">
                <!-- Drop Zone -->
                <div id="drop-zone" class="drop-zone">
                    <div class="drop-zone-content">
                        <div class="drop-icon"></div>
                        <p>Drag and drop music files here</p>
                        <p class="drop-hint">or use the "Add Music" button</p>
                    </div>
                </div>

                <!-- Song List -->
                <div id="song-list-container" class="song-list-container">
                    <div class="list-header">
                        <div class="list-title">
                            <h2 id="current-view-title">All Songs</h2>
                            <span id="song-count" class="song-count">0 songs</span>
                        </div>
                        <div class="list-controls">
                            <button id="play-all-btn" class="btn btn-primary">Play All</button>
                        </div>
                    </div>
                    
                    <div class="song-list-header">
                        <span class="col-info">Song</span>
                        <span class="col-album">Album</span>
                        <span class="col-duration">Duration</span>
                        <span class="col-actions">♡</span>
                    </div>
                    
                    <div id="song-list" class="song-list">
                        <!-- Songs will be loaded here -->
                    </div>
                </div>
            </main>
        </div>

        <!-- Player Controls -->
        <footer class="player-controls">
            <div class="now-playing">
                <div class="album-art">
                    <div class="album-placeholder"></div>
                </div>
                <div class="track-info">
                    <div id="current-title" class="track-title">No song selected</div>
                    <div id="current-artist" class="track-artist">-</div>
                </div>
            </div>

            <div class="controls">
                <button id="shuffle-btn" class="control-btn" title="Shuffle">
                    <i data-lucide="shuffle"></i>
                </button>
                <button id="like-current-btn" class="control-btn like-btn" title="Like current song">
                    <i data-lucide="heart"></i>
                </button>
                <button id="prev-btn" class="control-btn">
                    <i data-lucide="skip-back"></i>
                </button>
                <button id="play-pause-btn" class="control-btn play-btn">
                    <i data-lucide="play"></i>
                </button>
                <button id="next-btn" class="control-btn">
                    <i data-lucide="skip-forward"></i>
                </button>
            </div>

            <div class="progress-container">
                <span id="current-time" class="time">0:00</span>
                <div class="progress-bar-container">
                    <div class="progress-bar-track">
                        <div id="progress-bar-fill" class="progress-bar-fill"></div>
                    </div>
                    <div id="progress-bar-thumb" class="progress-bar-thumb"></div>
                </div>
                <span id="total-time" class="time">0:00</span>
            </div>

            <div class="volume-container">
                <button id="mute-btn" class="control-btn">
                    <i data-lucide="volume-2"></i>
                </button>
                <input type="range" id="volume-bar" class="volume-bar" min="0" max="100" value="100">
                <span id="volume-percentage" class="volume-percentage">100%</span>
            </div>
        </footer>
    </div>

    <!-- Hidden audio element -->
    <audio id="audio-player" preload="metadata"></audio>

    <!-- Modal for creating playlists -->
    <div id="playlist-modal" class="modal">
        <div class="modal-content">
            <div class="modal-header">
                <h3>Create New Playlist</h3>
                <button class="modal-close"></button>
            </div>
            <div class="modal-body">
                <input type="text" id="playlist-name-input" placeholder="Playlist name" maxlength="50">
            </div>
            <div class="modal-footer">
                <button id="cancel-playlist-btn" class="btn btn-secondary">Cancel</button>
                <button id="create-playlist-confirm-btn" class="btn btn-primary">Create</button>
            </div>
        </div>
    </div>

    <!-- Modal for managing watched folders -->
    <div id="folders-modal" class="modal">
        <div class="modal-content" style="width: 600px;">
            <div class="modal-header">
                <h3>Import Folders</h3>
                <button class="modal-close" id="folders-modal-close"></button>
            </div>
            <div class="modal-body">
                <div class="folders-section">
                    <div class="section-header">
                        <h4>Watched Folders</h4>
                        <button id="add-folder-from-modal-btn" class="btn btn-primary btn-small">Add Folder</button>
                    </div>
                    <p class="section-description">Folders are automatically monitored for new music files</p>
                    <div id="watched-folders-list" class="watched-folders">
                        <!-- Watched folders will be loaded here -->
                    </div>
                </div>
            </div>
            <div class="modal-footer">
                <button id="close-folders-btn" class="btn btn-secondary">Close</button>
            </div>
        </div>
    </div>

    <!-- Settings Modal -->
    <div id="settings-modal" class="modal">
        <div class="modal-content settings-modal-content">
            <div class="modal-header">
                <h3>Settings</h3>
                <button class="modal-close" id="settings-modal-close">
                    <i data-lucide="x"></i>
                </button>
            </div>
            <div class="modal-body">
                <div class="settings-tabs">
                    <button class="settings-tab active" data-tab="appearance">
                        <i data-lucide="palette"></i>
                        Appearance
                    </button>
                    <button class="settings-tab" data-tab="playback">
                        <i data-lucide="play"></i>
                        Playback
                    </button>
                    <button class="settings-tab" data-tab="general">
                        <i data-lucide="settings"></i>
                        General
                    </button>
                </div>
                
                <div class="settings-content">
                    <!-- Appearance Tab -->
                    <div class="settings-tab-content active" data-tab-content="appearance">
                        <div class="settings-section">
                            <h4>Color Theme</h4>
                            <p class="settings-description">Customize the colors of your music player</p>
                            
                            <div class="color-settings">
                                <div class="color-setting">
                                    <label for="primary-bg-color">Background</label>
                                    <div class="color-input-group">
                                        <input type="color" id="primary-bg-color" value="#000000">
                                        <input type="text" id="primary-bg-text" value="#000000" maxlength="7">
                                    </div>
                                </div>
                                
                                <div class="color-setting">
                                    <label for="accent-color">Accent Color</label>
                                    <div class="color-input-group">
                                        <input type="color" id="accent-color-picker" value="#667eea">
                                        <input type="text" id="accent-color-text" value="#667eea" maxlength="7">
                                    </div>
                                </div>
                                
                                <div class="color-setting">
                                    <label for="text-color">Text Color</label>
                                    <div class="color-input-group">
                                        <input type="color" id="text-color-picker" value="#ffffff">
                                        <input type="text" id="text-color-text" value="#ffffff" maxlength="7">
                                    </div>
                                </div>
                                
                                <div class="color-setting">
                                    <label for="border-color">Border Color</label>
                                    <div class="color-input-group">
                                        <input type="color" id="border-color-picker" value="#333333">
                                        <input type="text" id="border-color-text" value="#333333" maxlength="7">
                                    </div>
                                </div>
                            </div>
                            
                            <div class="theme-presets">
                                <h5>Quick Themes</h5>
                                <div class="preset-buttons">
                                    <button class="preset-btn" data-theme="default">Default</button>
                                    <button class="preset-btn" data-theme="dark-blue">Dark Blue</button>
                                    <button class="preset-btn" data-theme="purple">Purple</button>
                                    <button class="preset-btn" data-theme="dark-pink">Dark Pink</button>
                                    <button class="preset-btn" data-theme="green">Green</button>
                                    <button class="preset-btn" data-theme="red">Red</button>
                                </div>
                            </div>
                        </div>
                    </div>
                    
                    <!-- Playback Tab -->
                    <div class="settings-tab-content" data-tab-content="playback">
                        <div class="settings-section">
                            <h4>Audio Settings</h4>
                            <div class="setting-item">
                                <label>
                                    <input type="checkbox" id="crossfade-enabled">
                                    Enable crossfade between tracks
                                </label>
                            </div>
                            <div class="setting-item crossfade-duration" id="crossfade-duration-setting" style="display: none;">
                                <label for="crossfade-duration">Crossfade Duration</label>
                                <div class="slider-container">
                                    <input type="range" id="crossfade-duration" min="1" max="10" value="3" step="1">
                                    <span id="crossfade-duration-value">3 seconds</span>
                                </div>
                            </div>
                        </div>
                    </div>
                    
                    <!-- General Tab -->
                    <div class="settings-tab-content" data-tab-content="general">
                        <div class="settings-section">
                            <h4>Application Settings</h4>
                            <div class="setting-item">
                                <label>
                                    <input type="checkbox" id="minimize-to-tray">
                                    Minimize to system tray
                                </label>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
            <div class="modal-footer">
                <button id="reset-settings-btn" class="btn btn-secondary">Reset to Default</button>
                <button id="close-settings-btn" class="btn btn-primary">Close</button>
            </div>
        </div>
    </div>

    <!-- Context Menu -->
    <div id="song-context-menu" class="context-menu">
        <div class="context-menu-item" id="context-play-song">
            <i data-lucide="play"></i>
            Play Song
        </div>
        <div class="context-menu-separator"></div>
        <div class="context-menu-item" id="context-search-artist">
            <i data-lucide="user"></i>
            Search all by <span id="context-artist-name">Artist</span>
        </div>
        <div class="context-menu-item" id="context-search-album">
            <i data-lucide="disc"></i>
            Search all by <span id="context-album-name">Album</span>
        </div>
        <div class="context-menu-separator"></div>
        <div class="context-menu-item" id="context-like-song">
            <i data-lucide="heart"></i>
            <span id="context-like-text">Like Song</span>
        </div>
        <div class="context-menu-item danger" id="context-delete-song">
            <i data-lucide="trash-2"></i>
            Delete from Library
        </div>
    </div>

    <!-- Notification container -->
    <div id="notification-container" class="notification-container"></div>

    <!-- Bulk import progress -->
    <div id="bulk-import-progress" class="bulk-import-progress">
        <div class="progress-header">
            <span id="progress-title">Importing music files...</span>
            <button id="progress-close" class="progress-close">×</button>
        </div>
        <div class="progress-bar-wrapper">
            <div id="import-progress-bar" class="import-progress-bar"></div>
        </div>
        <div class="progress-stats">
            <span id="progress-text">Processing files...</span>
            <span id="progress-numbers">0 / 0</span>
        </div>
    </div>

    <!-- Utility scripts -->
    <script src="../src/renderer/utils/formatters.js"></script>
    
    <!-- Service scripts -->
    <script src="../src/renderer/services/NotificationService.js"></script>
    <script src="../src/renderer/services/ProgressService.js"></script>
    
    <!-- Component scripts -->
    <script src="../src/renderer/components/TitleBarManager.js"></script>
    <script src="../src/renderer/components/SongRenderer.js"></script>
    <script src="../src/renderer/components/PlaylistManager.js"></script>
    <script src="../src/renderer/components/FolderManager.js"></script>
    <script src="../src/renderer/components/DragDropHandler.js"></script>
    <script src="../src/renderer/components/SettingsManager.js"></script>
    <script src="../src/renderer/components/AudioPlayer.js"></script>
    
    <!-- Main scripts -->
    <script src="../src/renderer/MusicPlayer.js"></script>
    
    <!-- Initialize app -->
    <script>
        document.addEventListener('DOMContentLoaded', () => {
            // Initialize Lucide icons
            lucide.createIcons();
            
            // Initialize title bar
            window.titleBarManager = new TitleBarManager();
            
            // Initialize music player
            window.musicPlayer = new MusicPlayer();
        });
    </script>
</body>
</html>